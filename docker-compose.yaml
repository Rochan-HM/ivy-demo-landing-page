version: '3.7'

services:
  nginx:
    image: nginx:latest
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./htpasswd:/etc/nginx/.htpasswd:ro
    command: [nginx, '-g', 'daemon off;']
    configs:
      - source: nginx_config
        target: /etc/nginx/nginx.conf
      - source: htpasswd_config
        target: /etc/nginx/.htpasswd

configs:
  nginx_config:
    file: ./nginx.conf
  htpasswd_config:
    file: ./htpasswd
